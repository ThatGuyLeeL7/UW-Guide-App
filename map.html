<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      #map {
        height: 100%;
      }
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        zoom: 20;
      }
    </style>
    <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCGzvTo0fh_kx4sNwwukJpIPHRwaIA8rno&loading=async&callback=initMap">
    </script>
    <script>
      let map;
      let marker; 
      navigator.geolocation.getCurrentPosition(position => {
        const{latitude, longitude } = position.coords;
        const pos = {
            lat: position.coords.latitude,
            lng: position.coords.longitude,
          };

        map.setCenter(pos);
        //marker.setCenter(pos);
      })
      async function initMap() {
        const { Map } = await google.maps.importLibrary("maps");
        const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
        const position = { lat: -34.397, lng: 150.644 };
        map = new Map(document.getElementById("map"), {
          center: position,
          zoom: 20,
        });
        // marker = new AdvancedMarkerElement
        // ({
          // map: map,
          // position: position,
        // });
      }
      initMap();
    </script>
  </head>
  <body>
    <div id="map"></div>
  </body>
</html>